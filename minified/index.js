!function(n,t){"function"==typeof define&&define.amd?define([],t):n.imagePreloaderQueue=t()}(this,function(){"use strict";return function(){function n(){var n,e=t(arguments);for(n=0;n<e.length;n++){if("string"!=typeof e[n])throw new Error("ImagePreloaderQueue only accepts strings");Q.push(e[n])}}function t(n){return n=Array.prototype.slice.call(n,0),n.reduce(function(n,t){return"[object Array]"===Object.prototype.toString.call(t)?n=n.concat(t):n.push(t),n},[])}function e(){if(v&&!o())u(w);else{if(0===A.length&&0===Q.length&&!w)throw new Error("You must add images to queue");0===Q.length?m(S):o()||(w=Q.splice(0,1)[0],u(w))}}function o(){return q}function u(n){q=!0,m(P,[n]),v=new Image,v.onload=function(){r(n)},v.onerror=function(){i(n,arguments[0])},v.src=n}function r(n){m(b,[n]),m(j,[n]),A.push(n),c(),e()}function i(n){m(E,[n]),m(j,[n]),L.push(n),c(),e()}function c(){v=null,w=null,q=!1}function f(){q=!1,v&&(v.src="")}function s(n){f(),setTimeout(e,n)}function a(n){E.push(n)}function l(n){P.push(n)}function p(n){b.push(n)}function h(n){j.push(n)}function g(n){S.push(n)}function d(){var n=A.length+L.length;return n/(n+Q.length)}function m(n,t){for(var e=0;e<n.length;e++)"function"==typeof n[e]&&n[e].apply(null,t)}function y(){return A}function I(){return Q}var w,v,A=[],L=[],Q=[],E=[],P=[],b=[],j=[],S=[],q=!1;return{add:n,start:e,pause:f,pauseFor:s,onAfterItem:h,onItemError:a,onBeforeItemLoad:l,onAfterItemLoad:p,onQueueLoad:g,getProgress:d,getLoaded:y,getQueue:I,isStarted:o}}});